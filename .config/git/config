[alias]
    # view commit log abbreviated SHA, description, and history graph
    l = log --graph --abbrev-commit --decorate --format=format:'%C(yellow)%h%C(reset) %s %C(italic dim default)- %an%C(reset)%C(auto)%d%C(reset)'
    lg = log --graph --abbrev-commit --decorate --format=format:'%C(yellow)%h%C(reset) - %C(cyan)%aD%C(reset) %C(green)(%ar)%C(reset)%C(auto)%d%C(reset)%n''          %s %C(dim italic)- %an%C(reset)' --all
    llg = log --graph --abbrev-commit --decorate --pretty
    # list contributors summary in order of most commits
    ppl = shortlog --summary --numbered
    # quick aliases
    s = status
    a = add
    p = pull --recurse-submodules
    # shows the diff from the last commit or $n revisions ago
    d = "!f() { git diff-index --quiet HEAD -- || clear; git diff --patch-with-stat ${1:+HEAD~$1}; }; f"
    # undo the last commit
    undo = reset --soft HEAD~1
    # reword the last commit
    reword = commit --amend
    # add staged files to the last commit
    oops = commit --amend --no-edit
    # interactive rebase with $n latest commits or from root
    ir = "!f() { if [ \"$1\" = \"root\" ]; then git rebase -i --root; elif [ -n \"$1\" ]; then git rebase -i HEAD~\"$1\"; else echo 'Error: Please specify the number of commits (or \"root\")' >&2; exit 1; fi; }; f"
    # add and commit all changes
    ac = !git add ':(exclude,attr:builtin_objectmode=160000)' && git commit -av
    # switch to a branch, creating it if necessary.
    go = "!f() { git checkout -b \"$1\" 2> /dev/null || git checkout \"$1\"; }; f"
    # find branches containing commit (did this commit make it to main?)
    fb = branch -a --contains
    # find tags containing commit (is this commit in a release?)
    ft = describe --always --contains
    # find commits by source code (who added or removed this code?)
    fc = "!f() { git log --pretty=format:'%C(yellow)%h  %Cblue%ad  %Creset%s%Cgreen  [%cn] %Cred%d' --decorate --date=short -S$1; }; f"
    # find commits by commit message (what commits did this?)
    fm = "!f() { git log --pretty=format:'%C(yellow)%h  %Cblue%ad  %Creset%s%Cgreen  [%cn] %Cred%d' --decorate --date=short --grep=$1; }; f"

[apply]
    # fix whitespace errors when applying a patch
    whitespace = fix

[core]
    # default editor to use
    editor = micro
    # global gitignore file
    excludesFile = ~/.config/git/gitignore_global
    # treat whitespace as an error
    whitespace = space-before-tab,-indent-with-non-tab,trailing-space
    # speed up commands involving untracked files
    untrackedCache = true
    # macOS fix: more reliable at detecting changes but slower
    trustctime = false
    # macOS fix: compensate for mac storing unicode characters via NFD
    precomposeunicode = false
    # use delta as the diff pager
    pager = delta

[interactive]
    diffFilter = delta --color-only

[delta]
    navigate = true
    side-by-side = true
    detect-dark-light = never
    line-numbers = true
    wrap-max-lines = unlimited
    line-numbers-wrap-style = omit
    syntax-theme = base16
    line-numbers-left-format = "{nm:>4}┊"
    line-numbers-right-format = "{np:>4}│"
    line-numbers-left-style = black
    line-numbers-right-style = black
    line-numbers-zero-style = brightblack
    line-numbers-plus-style = 2
    line-numbers-minus-style = 1
    plus-style = syntax 119
    plus-emph-style = syntax bold 120
    plus-empty-line-marker-style = normal 119
    minus-style = syntax 204
    minus-emph-style = syntax bold 205
    minus-empty-line-marker-style = normal 204
    blame-palette = normal 254 255
    hunk-header-style = italic brightblack 122
    hunk-header-line-number-style = brightblack 123
    hunk-header-decoration-style = omit
    hunk-label = "@@"
    hunk-header-file-style = italic bold
    file-style = italic
    file-decoration-style = black ul ol
    file-modified-label = "   "
    file-added-label = "   "
    file-removed-label = "   "
    file-renamed-label ="   "

[color]
    # this is the default color scheme but safe to be explicit
    ui = auto

[diff]
    # make a distinction between add and delete, renames, and copies
    renames = copies

[include]
    path = ~/.config/git/config.local

[init]
    defaultBranch = main

[merge]
    ff = false
    log = true
    conflictStyle = zdiff3

[rebase]
    rebaseMerges = true

[pull]
    # avoids merge commits from ff false
    rebase = merges

[push]
    # push relevant annotated tags
    followTags = true

[url "git@github.com:"]
    # use ssh when pushing. This is here because I only have
    # authentication setup for ssh but the url might be https
    # because a public repository was cloned.
    pushInsteadOf = https://github.com/

[fetch]
    # always prune refs to remote branches that have been deleted
    prune = true

[color "status"]
    added = blue
    changed = yellow
    untracked = green
